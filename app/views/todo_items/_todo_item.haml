%article{ :class => "todo-item #{'complete' if todo_item.is_complete?} #{'expired' if todo_item.expired?}", :id => "todo-item_#{todo_item.id}" }
  .drag-handle
  .is-complete
    = form_for [todo_item.todo_list, todo_item] do |f|
      = f.check_box :is_complete
  %h6.title= todo_item.title
  - if todo_item.assignee
    %span.assignee
      %span.icon.icon-user
      = todo_item.assignee.user
  - if todo_item.due_date
    %span.due-date
      %span.icon.icon-clock-small
      = due_date_in_words todo_item.due_date
  = link_to [todo_item.todo_list, todo_item], :title => 'Leave a comment' do
    %span.icon.icon-balloon-small
    - if todo_item.comments.any?
      %span.comments= todo_item.comments.count
  .actions
    = link_to todo_item_worklogs_path(todo_item), :class => 'link-icon' do
      %span.icon.icon-clock-small
    = render :partial => 'worklogs/form', :locals => { :todo_item => todo_item, :worklog => Worklog.new }
    = link_to edit_todo_list_todo_item_path(todo_item.todo_list, todo_item), :class => 'link-icon', :title => 'Edit' do
      %span.icon.icon-pencil-small
    = link_to [todo_item.todo_list, todo_item], :confirm => 'Are you sure?', :method => :delete, :class => 'link-icon', :title => 'Delete' do
      %span.icon.icon-cross-small
  -#.description= todo_item.description
