= form_for [todo_list, todo_item] do |f|
  = render :partial => "shared/error_messages", :locals => { :object => todo_item }
  .field
    = f.label :title
  .field
    = f.text_field :title
  .field
    = f.label :description
  .field
    = f.text_area :description
  .field
    = f.label :due_date
  .field
    = f.datetime_select :due_date, :include_blank => true, :start_year => Date.current.year, :end_year => (Date.current.year + 1)
  - if todo_list.project
    = f.fields_for :assignee, ( todo_item.assignee || todo_item.build_assignee ) do |a|
      = render :partial => 'assignee_fields', :locals => { :f => a }
  .actions
    = f.submit
